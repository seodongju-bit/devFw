<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
      PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
   
   <mapper namespace="mapper.notice">
  <resultMap id="C_P003Result01" type="C_P003VO">
  <result property="de_number" column="de_number" />
  <result property="mem_no" column="mem_no" />
  <result property="de_division" column="de_division" />
  <result property="de_date" column="de_date" />
  <result property="de_contents" column="de_contents" />
 
  </resultMap>


 <resultMap id="C_P003Result02" type="C_P003VO">
  <result property="qu_number" column="qu_number" />
  <result property="mem_no" column="mem_no" />
  <result property="qu_contents" column="qu_contents" />                 
  <result property="qu_answer" column="qu_answer" />

 
  </resultMap>
  
  
  
     <select id="noticeItem" resultMap="C_P003Result01" parameterType="java.util.Map"> 
      <![CDATA[
       SELECT d.de_number,d.mem_no,d.de_division,d.de_date,d.de_contents
       FROM declarations d, members m
       WHERE d.mem_no = m.mem_no AND 
       ROWNUM<4
       ORDER BY d.de_number DESC
      ]]>            

   </select>  
   
      <select id="noticeItem2" resultMap="C_P003Result02" parameterType="java.util.Map"> 
      <![CDATA[
     SELECT q.qu_number,q.mem_no,q.qu_contents,q.qu_answer
      FROM questions q, members m
      WHERE q.mem_no = m.mem_no AND
      ROWNUM<4
      ORDER BY q.qu_number DESC
      ]]>         

   </select>   
   

                          
   <select id="noticeDetail" parameterType="java.util.Map" resultType="java.util.HashMap"> 
    <![CDATA[
        
   SELECT de_number,mem_no,de_division,de_date,de_contents
   FROM declarations 
   WHERE de_number=#{de_number}
           
        ]]>         
 
   </select>
   
   
  <select id="noticeDetail2" parameterType="java.util.Map" resultType="java.util.HashMap"> 
    <![CDATA[
        
   SELECT qu_number,qu_contents,qu_answer,mem_no
   FROM questions 
   WHERE qu_number=#{qu_number}
           
        ]]>         
 
   </select>
   
   
   
    <select id="questionDetail" parameterType="java.util.Map" resultType="java.util.HashMap"> 
    <![CDATA[
        
   SELECT de_number,mem_no,de_division,de_date,de_contents
   FROM declarations 
   WHERE de_number=#{de_number}
           
        ]]>         
 
   </select>
   
   
     <select id="questionDetail1" parameterType="java.util.Map" resultType="java.util.HashMap"> 
    <![CDATA[
        
   SELECT qu_number,qu_contents,qu_answer,mem_no
   FROM questions 
   WHERE qu_number=#{qu_number}
           
        ]]>         
 
   </select>

   <select id="countBoard" resultType="int">
	<![CDATA[
	SELECT COUNT(*) FROM notice
	]]>
	</select>
  
  
  
  <select id="Allquestions" resultMap="C_P003Result02" >                   
      <![CDATA[
        SELECT qu_number,mem_no,qu_contents,qu_answer
        FROM (
        SELECT ROWNUM RN, A.* 
				FROM (
				SELECT q.qu_number,q.mem_no,qu_contents,q.qu_answer
                FROM questions q, members m
                WHERE q.mem_no = m.mem_no
				ORDER BY q.qu_number DESC
				)A
			)
	    WHERE RN BETWEEN #{start} AND #{end}
			
      
      ]]>         

   </select>   
  
  
  
    <select id="Allquestions1" resultMap="C_P003Result01" >                   
      <![CDATA[
        SELECT de_number,mem_no,de_contents,de_division,de_date
        FROM (
        SELECT ROWNUM RN, A.* 
				FROM (
				SELECT d.de_number,d.mem_no,d.de_contents,d.de_division,d.de_date
                FROM declarations d, members m
                WHERE d.mem_no = m.mem_no
				ORDER BY d.de_number DESC
				)A
			)
	    WHERE RN BETWEEN #{start} AND #{end}
			      
      
      ]]>         

   </select>   
   
 
  
  
  
  </mapper>